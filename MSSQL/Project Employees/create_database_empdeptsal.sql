/* TWORZENIE BAZY PRACOWNIKOW MSSQL */

DROP TABLE PROJ_EMP;
DROP TABLE PROJ;
DROP TABLE EMP;
DROP TABLE DEPT;
DROP TABLE SALGRADE;

CREATE TABLE EMP
       (EMPNO INT NOT NULL,
        ENAME VARCHAR(10),
        JOB VARCHAR(9),
        MGR INT,
        HIREDATE DATETIME,
        SAL INT,
        COMM INT,
        DEPTNO INT);

ALTER TABLE EMP
ADD CONSTRAINT EMP_PK PRIMARY KEY (EMPNO)   
Go

ALTER TABLE DEPT
ADD CONSTRAINT DEPT_PK PRIMARY KEY (DEPTNO)   
Go

ALTER TABLE SALGRADE
ADD CONSTRAINT SALGRADE_PK PRIMARY KEY (GRADE)   
Go

INSERT INTO EMP VALUES
        (7369, 'SMITH',  'CLERK',     7902,
        CONVERT(DATETIME,'17-DEC-1980'),  800, NULL, NULL);
INSERT INTO EMP VALUES
        (7499, 'ALLEN',  'SALESMAN',  7698,
        CONVERT(DATETIME,'20-FEB-1981'), 1600,  300, 30);
INSERT INTO EMP VALUES
        (7521, 'WARD',   'SALESMAN',  7698,
        CONVERT(DATETIME,'22-FEB-1981'), 1250,  500, 30);
INSERT INTO EMP VALUES
        (7566, 'JONES',  'MANAGER',   7839,
        CONVERT(DATETIME,'2-APR-1981'),  2975, NULL, 20);
INSERT INTO EMP VALUES
        (7654, 'MARTIN', 'SALESMAN',  7698,
        CONVERT(DATETIME,'28-SEP-1981'), 1250, 1400, 30);
INSERT INTO EMP VALUES
        (7698, 'BLAKE',  'MANAGER',   7839,
        CONVERT(DATETIME,'1-MAY-1981'),  2850, NULL, 30);
INSERT INTO EMP VALUES
        (7782, 'CLARK',  'MANAGER',   7839,
        CONVERT(DATETIME,'9-JUN-1981'),  2450, NULL, 10);
INSERT INTO EMP VALUES
        (7788, 'SCOTT',  'ANALYST',   7566,
        CONVERT(DATETIME,'09-DEC-1982'), 3000, NULL, 20);
INSERT INTO EMP VALUES
        (7839, 'KING',   'PRESIDENT', NULL,
        CONVERT(DATETIME,'17-NOV-1981'), 5000, NULL, 10);
INSERT INTO EMP VALUES
        (7844, 'TURNER', 'SALESMAN',  7698,
        CONVERT(DATETIME,'8-SEP-1981'),  1100,    0, 30);
INSERT INTO EMP VALUES
        (7876, 'ADAMS',  'CLERK',     7788,
        CONVERT(DATETIME,'12-JAN-1983'), 1100, NULL, 20);
INSERT INTO EMP VALUES
        (7900, 'JAMES',  'CLERK',     7698,
        CONVERT(DATETIME,'3-DEC-1981'),   950, NULL, 30);
INSERT INTO EMP VALUES
        (7902, 'FORD',   'ANALYST',   7566,
        CONVERT(DATETIME,'3-DEC-1981'),  3000, NULL, 20);
INSERT INTO EMP VALUES
        (7934, 'MILLER', 'CLERK',     7782,
        CONVERT(DATETIME,'23-JAN-1982'), 1300, NULL, 10);

CREATE TABLE DEPT
       (DEPTNO INT,
        DNAME VARCHAR(14),
        LOC VARCHAR(13) );

INSERT INTO DEPT VALUES (10, 'ACCOUNTING', 'NEW YORK');
INSERT INTO DEPT VALUES (20, 'RESEARCH',   'DALLAS');
INSERT INTO DEPT VALUES (30, 'SALES',      'CHICAGO');
INSERT INTO DEPT VALUES (40, 'OPERATIONS', 'BOSTON');

CREATE TABLE SALGRADE
        (GRADE INT NOT NULL,
         LOSAL INT NOT NULL,
         HISAL INT NOT NULL);

INSERT INTO SALGRADE VALUES (1,  700, 1200);
INSERT INTO SALGRADE VALUES (2, 1201, 1400);
INSERT INTO SALGRADE VALUES (3, 1401, 2000);
INSERT INTO SALGRADE VALUES (4, 2001, 3000);
INSERT INTO SALGRADE VALUES (5, 3001, 9999);




CREATE TABLE PROJ
   (PROJNO int not null, 
	 PNAME VARCHAR(14) not null, 
	 BUDGET int not null, 
	 START_DATE DATE, 
	 END_DATE DATE
   ) ;



ALTER TABLE PROJ
	ADD CONSTRAINT PROJ_PK PRIMARY KEY (PROJNO)   


Insert into PROJ  values (1,'PROJECT1',15000,'2016-10-1','2016-10-31');
Insert into PROJ  values (2,'PROJECT2',23000,'2016-10-15','2016-11-30');
Insert into PROJ  values (3,'PROJECT3',48000,'2016-11-15','2016-12-31');
Insert into PROJ  values (4,'PROJECT4',21000,'2016-12-10','2016-12-20');
--------------------------------------------------------


CREATE TABLE PROJ_EMP
   (PROJNO int NOT NULL , 
    EMPNO  int NOT NULL ,
    CONSTRAINT PROJ_EMP_PRIMARY_KEY PRIMARY KEY (PROJNO,EMPNO) 
   );

ALTER TABLE PROJ_EMP
	ADD CONSTRAINT EMP_PROJ_EMP_FK1 foreign key (
		EMPNO)
	 references EMP (
		EMPNO) on update no action on delete no action  


ALTER TABLE PROJ_EMP
	ADD CONSTRAINT PROJ_PROJ_EMP_FK2 foreign key (
		PROJNO)
	 references PROJ (
		PROJNO) on update no action on delete no action  


Insert into PROJ_EMP values(1,7782);
Insert into PROJ_EMP values(1,7788);
Insert into PROJ_EMP values(1,7369);
Insert into PROJ_EMP values(1,7566);

Insert into PROJ_EMP values(2,7839);
Insert into PROJ_EMP values(2,7782);
Insert into PROJ_EMP values(2,7902);
Insert into PROJ_EMP values(2,7698);


Insert into PROJ_EMP values(3,7566);
Insert into PROJ_EMP values(3,7902);
Insert into PROJ_EMP values(3,7369);
Insert into PROJ_EMP values(3,7788);
Insert into PROJ_EMP values(3,7876);

Insert into PROJ_EMP values(4,7698);
Insert into PROJ_EMP values(4,7900);
Insert into PROJ_EMP values(4,7902);

Insert into PROJ  values (5,'PROJECT5',24000,'2017-10-10','2017-12-29');
Insert into PROJ_EMP values(5,7369);
Insert into PROJ_EMP values(5,7788);
Insert into PROJ_EMP values(5,7876);

